---
PRD-ID: PRD-Guild-Manager
Story-ID: PRD-NEWGUILD-VS-0001
Title: 功能纵切 — 公会管理器
Status: Active
ADR-Refs:
  - ADR-0018
  - ADR-0004
  - ADR-0005
  - ADR-0023
  - ADR-0011
Test-Refs:
  # Core 领域逻辑（xUnit）
  - Game.Core.Tests/Domain/GuildCoreTests.cs
  - Game.Core.Tests/Domain/GuildMemberTests.cs
  - Game.Core.Tests/Domain/GameTurnSystemTests.cs
  - Game.Core.Tests/Domain/EventEngineTests.cs
  - Game.Core.Tests/Domain/GameLoopTests.cs
  # 场景与公会 UI（GdUnit4）
  - Tests.Godot/tests/Scenes/test_main_scene_smoke.gd
  - Tests.Godot/tests/Scenes/test_guild_main_scene.gd
  - Tests.Godot/tests/Scenes/Guild/T2PlayableSceneTests.gd
  - Tests.Godot/tests/Integration/test_guild_workflow.gd
  # CI / Smoke 汇总
  - logs/ci/<date>/ci-pipeline-summary.json
  - logs/e2e/<date>/smoke/selfcheck-summary.json
---

本页仅作为“功能纵切（08 章）”对“公会管理器”模块的实现约束与测试挂钩索引：

- 阈值/策略/门禁等跨切面口径仅"引用"Base 与 ADR，不在 08 复制：
  - 安全与 Godot 基线：参见 CH02 与 ADR‑0019
  - 事件/契约统一：参见 CH01/CH03 与 ADR‑0004
  - 质量门禁/发布健康与性能预算：参见 CH03 与 ADR‑0005、ADR‑0015
- 具体事件/DTO 与端口定义一律以 `Game.Core/Contracts/<Module>/` 为 SSoT（per ADR-0020）；08 仅登记功能影响与测试范围。
- 测试入口按 Test‑Refs 落地（xUnit + GdUnit4），CI 会据此做就地验收与追溯。

示例：当前 Godot+C# 契约引用

- 公会成员加入事件契约：`Game.Core/Contracts/Guild/GuildMemberJoined.cs`

当前 T2 最小事件集合（规划）：

- 公会生命周期事件：
  - `core.guild.created`（GuildCreated，契约位置规划：Game.Core/Contracts/Guild/GuildCreated.cs）
  - `core.guild.member.joined`（GuildMemberJoined，契约位置：Game.Core/Contracts/Guild/GuildMemberJoined.cs）
  - `core.guild.member.left`（GuildMemberLeft，契约位置规划：Game.Core/Contracts/Guild/GuildMemberLeft.cs）

功能范围要点（示例）：

- 公会核心：建团/解散/权限角色
- 活动系统：团队副本/匹配与结算流程
- 成员管理：邀请/审批/踢出与日志
- 世界生成：关卡种子与资源刷新（如有）

注：如本模块引入新的事件或契约，请先更新 `Game.Core/Contracts/<Module>/`（per ADR-0020），再在 Overlay/08 以"引用"方式登记变更，并补充/更新 Test‑Refs。
