锘縖{"name_path": "GameTurnPhaseChanged", "kind": "Class", "body_location": {"start_line": 11, "end_line": 20}, "relative_path": "Game.Core\\Contracts\\GameLoop\\GameTurnPhaseChanged.cs", "content_around_reference": "...  11:public sealed record GameTurnPhaseChanged(\n  >  12:    SaveIdValue SaveId,\n...  13:    int Week,"}, {"name_path": "GameTurnStarted", "kind": "Class", "body_location": {"start_line": 11, "end_line": 19}, "relative_path": "Game.Core\\Contracts\\GameLoop\\GameTurnStarted.cs", "content_around_reference": "...  11:public sealed record GameTurnStarted(\n  >  12:    SaveIdValue SaveId,\n...  13:    int Week,"}, {"name_path": "GameTurnState", "kind": "Class", "body_location": {"start_line": 4, "end_line": 9}, "relative_path": "Game.Core\\Domain\\Turn\\GameTurnState.cs", "content_around_reference": "...   6:    GameTurnPhase Phase,\n  >   7:    SaveIdValue SaveId,\n...   8:    DateTimeOffset CurrentTime"}, {"name_path": "GameWeekAdvanced", "kind": "Class", "body_location": {"start_line": 11, "end_line": 19}, "relative_path": "Game.Core\\Contracts\\GameLoop\\GameWeekAdvanced.cs", "content_around_reference": "...  11:public sealed record GameWeekAdvanced(\n  >  12:    SaveIdValue SaveId,\n...  13:    int PreviousWeek,"}, {"name_path": "SaveIdValue/TryCreate", "kind": "Method", "body_location": {"start_line": 49, "end_line": 61}, "relative_path": "Game.Core\\Domain\\Turn\\SaveIdValue.cs", "content_around_reference": "...  48:    /// <returns>True when the value is valid; otherwise false.</returns>\n  >  49:    public static bool TryCreate(string value, out SaveIdValue? result)\n...  50:    {"}, {"name_path": "SaveIdValue/TryCreate", "kind": "Method", "body_location": {"start_line": 49, "end_line": 61}, "relative_path": "Game.Core\\Domain\\Turn\\SaveIdValue.cs", "content_around_reference": "...  58:\n  >  59:        result = new SaveIdValue(value);\n...  60:        return true;"}, {"name_path": "SaveIdValue", "kind": "Class", "body_location": {"start_line": 13, "end_line": 70}, "relative_path": "Game.Core\\Domain\\Turn\\SaveIdValue.cs", "content_around_reference": "...  65:    /// </summary>\n  >  66:    public static implicit operator string(SaveIdValue value) => value.Value;\n...  67:"}, {"name_path": "GameTurnSystem/StartNewWeek", "kind": "Method", "body_location": {"start_line": 35, "end_line": 51}, "relative_path": "Game.Core\\Engine\\GameTurnSystem.cs", "content_around_reference": "...  37:        // Validate SaveId using whitelist pattern [a-zA-Z0-9_-]{1,64}\n  >  38:        if (!SaveIdValue.TryCreate(saveId, out var validatedSaveId))\n...  39:        {"}, {"name_path": "GameLoopContractsTests/GameTurnStarted_Should_Accept_Valid_Fields", "kind": "Method", "body_location": {"start_line": 16, "end_line": 32}, "relative_path": "Game.Core.Tests\\Domain\\GameLoopContractsTests.cs", "content_around_reference": "...  21:        var evt = new GameTurnStarted(\n  >  22:            SaveId: new SaveIdValue(\"save-1\"),\n...  23:            Week: 1,"}, {"name_path": "GameLoopContractsTests/GameTurnPhaseChanged_Should_Accept_Valid_Fields", "kind": "Method", "body_location": {"start_line": 40, "end_line": 58}, "relative_path": "Game.Core.Tests\\Domain\\GameLoopContractsTests.cs", "content_around_reference": "...  45:        var evt = new GameTurnPhaseChanged(\n  >  46:            SaveId: new SaveIdValue(\"save-1\"),\n...  47:            Week: 1,"}, {"name_path": "GameLoopTests/GameTurnState_Can_Be_Constructed_For_Week_And_Phase", "kind": "Method", "body_location": {"start_line": 18, "end_line": 37}, "relative_path": "Game.Core.Tests\\Domain\\GameLoopTests.cs", "content_around_reference": "...  27:            Phase: GameTurnPhase.Resolution,\n  >  28:            SaveId: new SaveIdValue(\"test-save\"),\n...  29:            CurrentTime: now"}, {"name_path": "GameLoopContractsTests/GameWeekAdvanced_Should_Accept_Valid_Fields", "kind": "Method", "body_location": {"start_line": 66, "end_line": 82}, "relative_path": "Game.Core.Tests\\Domain\\GameLoopContractsTests.cs", "content_around_reference": "...  71:        var evt = new GameWeekAdvanced(\n  >  72:            SaveId: new SaveIdValue(\"save-1\"),\n...  73:            PreviousWeek: 1,"}, {"name_path": "SaveIdValueTests/Constructor_Accepts_Valid_Ids", "kind": "Method", "body_location": {"start_line": 9, "end_line": 20}, "relative_path": "Game.Core.Tests\\Domain\\SaveIdValueTests.cs", "content_around_reference": "...  15:    {\n  >  16:        var id = new SaveIdValue(value);\n...  17:"}, {"name_path": "SaveIdValueTests/Constructor_rejects_invalid_ids", "kind": "Method", "body_location": {"start_line": 22, "end_line": 33}, "relative_path": "Game.Core.Tests\\Domain\\SaveIdValueTests.cs", "content_around_reference": "...  29:    {\n  >  30:        Action act = () => _ = new SaveIdValue(value);\n...  31:"}, {"name_path": "SaveIdValueTests/Constructor_Rejects_Ids_Longer_Than_T64_Characters", "kind": "Method", "body_location": {"start_line": 35, "end_line": 43}, "relative_path": "Game.Core.Tests\\Domain\\SaveIdValueTests.cs", "content_around_reference": "...  39:\n  >  40:        Action act = () => _ = new SaveIdValue(tooLong);\n...  41:"}, {"name_path": "EventEngineTests/ExecuteAiPhase_Does_Not_Change_Week_Or_Phase_By_Default", "kind": "Method", "body_location": {"start_line": 157, "end_line": 175}, "relative_path": "Game.Core.Tests\\Domain\\EventEngineTests.cs", "content_around_reference": "... 164:            Phase: GameTurnPhase.AiSimulation,\n  > 165:            Sa?3238 chars truncated?         SaveId: new SaveIdValue(\"save-1\"),\n... 277:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "EventEngineTests/ExecuteAiPhase_PropagatesException_WhenEventBusFails", "kind": "Method", "body_location": {"start_line": 287, "end_line": 307}, "relative_path": "Game.Core.Tests\\Domain\\EventEngineTests.cs", "content_around_reference": "... 297:            Phase: GameTurnPhase.AiSimulation,\n  > 298:            SaveId: new SaveIdValue(\"save-1\"),\n... 299:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Moves_From_Resolution_To_Player_Phase", "kind": "Method", "body_location": {"start_line": 107, "end_line": 125}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 114:            Phase: GameTurnPhase.Resolution,\n  > 115:            SaveId: new SaveIdValue(\"save-1\"),\n... 116:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_PropagatesException_FromResolutionPhase", "kind": "Method", "body_location": {"start_line": 195, "end_line": 217}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 207:            Phase: GameTurnPhase.Resolution,\n  > 208:            SaveId: new SaveIdValue(\"save-1\"),\n... 209:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_PropagatesException_FromPlayerPhase", "kind": "Method", "body_location": {"start_line": 219, "end_line": 241}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 231:            Phase: GameTurnPhase.Player,\n  > 232:            SaveId: new SaveIdValue(\"save-1\"),\n... 233:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Publishes_GameTurnStarted_Event_At_Start_Of_First_Turn", "kind": "Method", "body_location": {"start_line": 267, "end_line": 288}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 278:            Phase: GameTurnPhase.Resolution,\n  > 279:            SaveId: new SaveIdValue(\"save-1\"),\n... 280:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Moves_From_Player_To_Ai_Phase", "kind": "Method", "body_location": {"start_line": 127, "end_line": 145}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 134:            Phase: GameTurnPhase.Player,\n  > 135:            SaveId: new SaveIdValue(\"save-1\"),\n... 136:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Moves_From_Ai_Phase_To_Next_Week_Resolution", "kind": "Method", "body_location": {"start_line": 147, "end_line": 165}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 154:            Phase: GameTurnPhase.AiSimulation,\n  > 155:            SaveId: new SaveIdValue(\"save-1\"),\n... 156:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_PropagatesException_FromAiPhase", "kind": "Method", "body_location": {"start_line": 243, "end_line": 265}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 255:            Phase: GameTurnPhase.AiSimulation,\n  > 256:            SaveId: new SaveIdValue(\"save-1\"),\n... 257:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Publishes_GameTurnPhaseChanged_When_Transitioning_Resolution_To_Player", "kind": "Method", "body_location": {"start_line": 290, "end_line": 316}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 301:            Phase: GameTurnPhase.Resolution,\n  > 302:            SaveId: new SaveIdValue(\"save-1\"),\n... 303:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/Advance_Publishes_GameWeekAdvanced_When_Completing_Full_Turn_Cycle", "kind": "Method", "body_location": {"start_line": 318, "end_line": 344}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 329:            Phase: GameTurnPhase.AiSimulation,\n  > 330:            SaveId: new SaveIdValue(\"save-1\"),\n... 331:            CurrentTime: DateTimeOffset.UtcNow"}, {"name_path": "GameTurnSystemTests/GameTurnState_SaveId_ShouldUseSaveIdValueType", "kind": "Method", "body_location": {"start_line": 482, "end_line": 494}, "relative_path": "Game.Core.Tests\\Domain\\GameTurnSystemTests.cs", "content_around_reference": "... 491:        saveIdProperty.Should().NotBeNull();\n  > 492:        saveIdProperty!.PropertyType.Should().Be(typeof(SaveIdValue),\n... 493:            \"SaveId should use SaveIdValue type for type-safe validation (ADR-0019)\");"}, {"name_path": "SaveIdValueTests/TryCreate_Returns_True_For_Valid_Value", "kind": "Method", "body_location": {"start_line": 45, "end_line": 53}, "relative_path": "Game.Core.Tests\\Domain\\SaveIdValueTests.cs", "content_around_reference": "...  47:    {\n  >  48:        var ok = SaveIdValue.TryCreate(\"save-1\", out var value);\n...  49:"}, {"name_path": "SaveIdValueTests/TryCreate_Returns_False_For_Invalid_Value", "kind": "Method", "body_location": {"start_line": 55, "end_line": 62}, "relative_path": "Game.Core.Tests\\Domain\\SaveIdValueTests.cs", "content_around_reference": "...  57:    {\n  >  58:        var ok = SaveIdValue.TryCreate(\"invalid/value\", out var value);\n...  59:"}]
