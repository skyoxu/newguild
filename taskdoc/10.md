# Task 10 Context (SaveIdValue)

## Task Mapping
- tasks.json id: 10
- tasks_back taskmaster_id: 10
- tasks_gameplay taskmaster_id: None

## Task Metadata (from .taskmaster/tasks/tasks.json)
- Title: GameLoop SaveIdValue 值对象与白名单校验
- Status: in-progress
- Priority: high
- Dependencies: ['9']

## ADR/CH/Test Refs
- adrRefs field (master): ['ADR-0019', 'ADR-0004', 'ADR-0005', 'ADR-0018']
- adr_refs (tasks_back): ['ADR-0019', 'ADR-0004', 'ADR-0005', 'ADR-0018']
- chapter_refs (tasks_back): ['CH01', 'CH02', 'CH04', 'CH06', 'CH07']
- test_refs (tasks_back): ['Game.Core/Domain/Turn/SaveIdValue.cs', 'Game.Core.Tests/Domain/SaveIdValueTests.cs', 'Game.Core.Tests/Domain/GameTurnSystemTests.cs', 'Game.Core.Tests/Domain/GameLoopTests.cs']

## Serena Outputs Saved
- Symbols:
  - taskdoc/10-1-find_symbol-SaveIdValue.json
  - taskdoc/10-1-find_symbol-GameTurnState.json
  - taskdoc/10-1-find_symbol-GameTurnSystem.json
- Interfaces/Contracts search:
  - taskdoc/10-2-search-interfaces.json
  - taskdoc/10-2-search-SaveIdValue-usage.json
- Event contracts (ADR-0004 alignment surface):
  - taskdoc/10-3-find_symbol-DomainEvent.json
  - taskdoc/10-3-find_symbol-GameTurnStarted.json
  - taskdoc/10-3-find_symbol-GameTurnPhaseChanged.json
  - taskdoc/10-3-find_symbol-GameWeekAdvanced.json
- References:
  - taskdoc/10-4-find_referencing_symbols-SaveIdValue.json

## Key Findings (for implementation planning)
- SaveIdValue already exists at Game.Core/Domain/Turn/SaveIdValue.cs and enforces whitelist pattern [a-zA-Z0-9_-]{1,64}.
- GameTurnState already uses SaveIdValue as its SaveId field (not string).
- GameTurnSystem.StartNewWeek currently accepts string saveId and validates via SaveIdValue.TryCreate before constructing state.
- GameLoop event contracts (GameTurnStarted/GameTurnPhaseChanged/GameWeekAdvanced) already align SaveId to SaveIdValue.
- Contracts scan (Serena): no residual "string SaveId" under Game.Core/Contracts (see taskdoc/10-5-contracts-saveid-string-scan.json).
- tasks.json(master) adrRefs for Task 10 are synced, matching tasks_back adr_refs.
